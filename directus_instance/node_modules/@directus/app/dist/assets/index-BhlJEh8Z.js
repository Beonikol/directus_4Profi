import{p as De,T as Ye,a as Je,o as Ke}from"./runtime-dom.esm-bundler-D61lAmyL.js";import{u as ke,p as Ee,q as Qe,s as Ue,t as Xe,v as et,w as tt,_ as nt,S as at,x as Be,y as R,N as ot,z as lt,A as fe,B as st,C as it,D as Fe,E as rt,F as ct,G as ut,H as Le,I as dt,J as vt,K as mt,L as _t,M as ft,V as Ie,O as pt,P as ht,Q as bt,R as gt}from"./index.CnKfDhaM.entry.js";import{u as yt,m as wt,a as kt,b as St,c as xt}from"./index-DSK-I9bp.js";import{storeToRefs as Se}from"./pinia.DeEyhdoI.entry.js";import{useI18n as X}from"./vue-i18n.DulgMnVJ.entry.js";import{useRouter as Oe}from"./vue-router.rbVd-2ci.entry.js";import{w as z,ba as k,aI as Q,j as S,an as c,ao as pe,k as $,af as u,aN as l,m as D,bk as s,F as oe,t as W,bq as M,u as a,l as L,al as le,bn as P,n as C,aP as K,b2 as Pe,bh as Vt,ap as $t,am as J,a1 as Nt,a2 as Mt,r as Ct,bo as Wt,M as Dt,ah as Bt}from"./runtime-core.esm-bundler-C9cKm0JW.js";const It={key:0,class:"item-count"},Tt={key:1,class:"content"},Et={key:1,class:"notifications-block"},Ut=["onClick"],Ft={key:0,class:"message"},Lt=z({__name:"notifications-drawer",setup(t){const{t:e,n:o}=X(),m=ke(),r=Ee(),x=Qe(),_=Ue(),V=Oe(),b=k(null),i=k([]),p=k(!1),g=k(["inbox"]),y=k([]),w=k(1),T=k(25),h=k(null),B=k(null),F=k(null),{notificationsDrawerOpen:I}=Se(m);Q(g,(n,d)=>{n[0]!==d[0]&&(i.value=[])}),Q(I,n=>{b.value=n?"directus_notifications":null});const O=S(()=>({_and:[{recipient:{_eq:r.currentUser.id}},{status:{_eq:g.value[0]}}]})),{items:Z,loading:ee,totalPages:j,totalCount:te,itemCount:ne,getItems:se,getItemCount:he,getTotalCount:q}=yt(b,{filter:S(()=>wt(B.value,O.value)),filterSystem:O,fields:k(["id","subject","message","collection","item","timestamp"]),sort:k(["-timestamp"]),search:h,limit:T,page:w}),E=S(()=>Z.value.map(n=>{let d;return n.collection?x.getCollection(n.collection)?.meta?.singleton||!n.item?d=Xe(n.collection):d=et(n.collection,n.item):String(n.item).startsWith("/")&&(d=String(n.item)),{...n,to:d}})),ie=S(()=>{if(!(!te.value||!ne.value))return tt({currentItems:ne.value,currentPage:w.value,perPage:T.value,totalItems:te.value,isFiltered:!!B.value,i18n:{t:e,n:o}})}),be=S(()=>i.value.length>0&&i.value.length<E.value.length),Y=S(()=>i.value.length===E.value.length&&E.value.length>0);async function U(){await se(),await q(),await he()}async function re(){Y.value?i.value=[]:i.value=E.value.map(n=>n.id)}function ge(n){i.value.includes(n)?i.value.splice(i.value.indexOf(n),1):i.value.push(n)}function ce(n){y.value.includes(n)?y.value.splice(y.value.indexOf(n),1):y.value.push(n)}async function ae(){i.value.length!==0&&(await Be.patch("/notifications",{keys:i.value,data:{status:g.value[0]==="inbox"?"archived":"inbox"}}),await U(),await _.refreshUnreadCount(),i.value=[])}async function ue(){try{await Be.delete("/notifications",{data:{keys:i.value}}),await U(),await _.refreshUnreadCount()}finally{p.value=!1,i.value=[]}}function de(n){V.push(n),I.value=!1}function v(){B.value=null,h.value=null}return(n,d)=>{const A=c("v-icon"),H=c("v-button"),N=c("v-card-title"),ve=c("v-card-actions"),ye=c("v-card"),je=c("v-dialog"),xe=c("v-list-item-icon"),Ve=c("v-list-item-content"),$e=c("v-tab"),Ae=c("v-tabs"),Ne=c("v-info"),Re=c("v-skeleton-loader"),Me=c("v-list"),Ce=c("v-checkbox"),ze=c("v-divider"),We=c("v-text-overflow"),He=c("v-list-item"),Ge=c("v-pagination"),Ze=c("v-drawer"),we=pe("tooltip"),qe=pe("md");return u(),$(Ze,{modelValue:s(I),"onUpdate:modelValue":d[8]||(d[8]=f=>Pe(I)?I.value=f:null),icon:"notifications",title:s(e)("notifications"),"sidebar-label":s(e)("folders"),onCancel:d[9]||(d[9]=f=>I.value=!1),onApply:ae},{"actions:prepend":l(()=>[a(Ye,{name:"fade"},{default:l(()=>[ie.value?(u(),D("span",It,M(ie.value),1)):L("",!0)]),_:1})]),actions:l(()=>[a(at,{modelValue:h.value,"onUpdate:modelValue":d[0]||(d[0]=f=>h.value=f),filter:B.value,"onUpdate:filter":d[1]||(d[1]=f=>B.value=f),collection:"directus_notifications"},null,8,["modelValue","filter"]),a(je,{modelValue:p.value,"onUpdate:modelValue":d[3]||(d[3]=f=>p.value=f),disabled:i.value.length===0,onEsc:d[4]||(d[4]=f=>p.value=!1),onApply:ue},{activator:l(({on:f})=>[K((u(),$(H,{rounded:"",icon:"",class:"action-delete",secondary:"",disabled:i.value.length===0,onClick:f},{default:l(()=>[a(A,{name:"delete",outline:""})]),_:1},8,["disabled","onClick"])),[[we,s(e)("delete_label"),void 0,{bottom:!0}]])]),default:l(()=>[a(ye,null,{default:l(()=>[a(N,null,{default:l(()=>[W(M(s(e)("delete_are_you_sure")),1)]),_:1}),a(ve,null,{default:l(()=>[a(H,{secondary:"",onClick:d[2]||(d[2]=f=>p.value=!1)},{default:l(()=>[W(M(s(e)("cancel")),1)]),_:1}),a(H,{kind:"danger",onClick:ue},{default:l(()=>[W(M(s(e)("delete_label")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","disabled"]),K((u(),$(H,{icon:"",rounded:"",disabled:i.value.length===0,secondary:"",onClick:ae},{default:l(()=>[a(A,{name:g.value[0]==="inbox"?"archive":"move_to_inbox"},null,8,["name"])]),_:1},8,["disabled"])),[[we,g.value[0]==="inbox"?s(e)("archive"):s(e)("unarchive"),void 0,{bottom:!0}]])]),sidebar:l(()=>[a(Ae,{modelValue:g.value,"onUpdate:modelValue":d[5]||(d[5]=f=>g.value=f),vertical:""},{default:l(()=>[a($e,{value:"inbox"},{default:l(()=>[a(xe,null,{default:l(()=>[a(A,{name:"inbox"})]),_:1}),a(Ve,null,{default:l(()=>[W(M(s(e)("inbox")),1)]),_:1})]),_:1}),a($e,{value:"archived"},{default:l(()=>[a(xe,null,{default:l(()=>[a(A,{name:"archive"})]),_:1}),a(Ve,null,{default:l(()=>[W(M(s(e)("archive")),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),default:l(()=>[!s(ee)&&!s(ne)?(u(),D(oe,{key:0},[B.value||h.value?(u(),$(Ne,{key:0,title:s(e)("no_results"),icon:"search",center:""},{append:l(()=>[a(H,{onClick:v},{default:l(()=>[W(M(s(e)("clear_filters")),1)]),_:1})]),default:l(()=>[W(M(s(e)("no_results_copy"))+" ",1)]),_:1},8,["title"])):(u(),$(Ne,{key:1,icon:"notifications",title:s(e)("no_notifications"),center:""},{default:l(()=>[W(M(s(e)("no_notifications_copy")),1)]),_:1},8,["title"]))],64)):(u(),D("div",Tt,[s(ee)?(u(),$(Me,{key:0,class:"notifications"},{default:l(()=>[(u(),D(oe,null,le(10,f=>a(Re,{key:f,class:P({dense:s(j)>1})},null,8,["class"])),64))]),_:1})):(u(),D("div",Et,[a(Ce,{class:P(["select-all",{dense:s(j)>1}]),label:Y.value?s(e)("deselect_all"):s(e)("select_all"),"model-value":Y.value,indeterminate:be.value,"onUpdate:modelValue":re},null,8,["class","label","model-value","indeterminate"]),a(ze,{class:P({dense:s(j)>1})},null,8,["class"]),a(Me,{class:"notifications"},{default:l(()=>[(u(!0),D(oe,null,le(E.value,f=>(u(),$(He,{key:f.id,block:"",dense:s(j)>1,clickable:!!f.message,onMousedown:d[6]||(d[6]=De(({target:G})=>F.value=G,["left","self"])),onMouseup:De(({target:G})=>{G===F.value&&ce(f.id),F.value=null},["left","self"])},{default:l(()=>[C("div",{class:"header",onClick:G=>ce(f.id)},[a(Ce,{"model-value":i.value.includes(f.id),"onUpdate:modelValue":G=>ge(f.id)},null,8,["model-value","onUpdate:modelValue"]),a(We,{class:"title",highlight:h.value,text:f.subject},null,8,["highlight","text"]),a(nt,{value:f.timestamp,type:"timestamp",relative:""},{default:l(({datetime:G})=>[a(We,{class:"datetime",text:G},null,8,["text"])]),_:1},8,["value"]),f.to?K((u(),$(A,{key:0,clickable:"",name:"open_in_new",onClick:G=>de(f.to)},null,8,["onClick"])),[[we,s(e)("goto_collection_content")]]):L("",!0),f.message?(u(),$(A,{key:1,clickable:"",name:y.value.includes(f.id)?"expand_less":"expand_more"},null,8,["name"])):L("",!0)],8,Ut),y.value.includes(f.id)&&f.message?K((u(),D("div",Ft,null,512)),[[qe,f.message]]):L("",!0)]),_:2},1032,["dense","clickable","onMouseup"]))),128))]),_:1})])),s(j)>1?(u(),$(Ge,{key:2,modelValue:w.value,"onUpdate:modelValue":d[7]||(d[7]=f=>w.value=f),"total-visible":5,length:s(j)},null,8,["modelValue","length"])):L("",!0)]))]),_:1},8,["modelValue","title","sidebar-label"])}}}),Ot=R(Lt,[["__scopeId","data-v-3f4c93f4"]]),Pt={class:"icon"},jt={key:0,class:"title"},At=z({__name:"sidebar-button",props:{to:{},icon:{default:"box"},active:{type:Boolean}},emits:["click"],setup(t){const e=ke(),{sidebarOpen:o}=Vt(e);return(m,r)=>{const x=c("v-icon");return u(),$($t(t.to?"router-link":"button"),{"aria-expanded":t.to?void 0:t.active,class:P(["sidebar-button",{active:t.active}]),onClick:r[0]||(r[0]=_=>m.$emit("click",_))},{default:l(()=>[C("div",Pt,[a(x,{name:t.icon},null,8,["name"])]),s(o)?(u(),D("div",jt,[J(m.$slots,"default",{},void 0,!0)])):L("",!0)]),_:3},8,["aria-expanded","class"])}}}),Rt=R(At,[["__scopeId","data-v-b46f3879"]]),zt={class:"notifications-preview"},Ht={key:0,class:"inline"},Gt={class:"padding-box"},Zt=z({__name:"notifications-preview",props:{sidebarOpen:{type:Boolean},modelValue:{type:Boolean}},emits:["update:modelValue"],setup(t){const{t:e}=X(),o=Ue(),{lastFour:m}=Se(o);return(r,x)=>{const _=c("router-link"),V=c("transition-expand"),b=pe("tooltip");return u(),D("div",zt,[K((u(),$(Rt,{active:t.modelValue,class:"toggle",icon:"pending_actions",onClick:x[0]||(x[0]=i=>r.$emit("update:modelValue",!t.modelValue))},{default:l(()=>[W(M(s(e)("activity_log")),1)]),_:1},8,["active"])),[[b,!t.sidebarOpen&&s(e)("activity_log"),void 0,{left:!0}]]),a(V,{tag:"div"},{default:l(()=>[t.modelValue?(u(),D("div",Ht,[C("div",Gt,[a(_,{class:P(["link",{"has-items":s(m).length>0}]),to:"/activity"},{default:l(()=>[W(M(s(e)("show_all_activity")),1)]),_:1},8,["class"]),a(Je,{tag:"div",name:"notification",class:"transition"},{default:l(()=>[(u(!0),D(oe,null,le(s(m),i=>(u(),$(ot,Nt({key:i.id},{ref_for:!0},i),null,16))),128))]),_:1})])])):L("",!0)]),_:1})])}}}),qt=R(Zt,[["__scopeId","data-v-e0cb683f"]]),Te=t=>Number.isFinite(t)?t:0;function Yt(t){return{days:Math.trunc(t/864e5),hours:Math.trunc(t/36e5%24),minutes:Math.trunc(t/6e4%60),seconds:Math.trunc(t/1e3%60),milliseconds:Math.trunc(t%1e3),microseconds:Math.trunc(Te(t*1e3)%1e3),nanoseconds:Math.trunc(Te(t*1e6)%1e3)}}function Jt(t){return{days:t/86400000n,hours:t/3600000n%24n,minutes:t/60000n%60n,seconds:t/1000n%60n,milliseconds:t%1000n,microseconds:0n,nanoseconds:0n}}function Kt(t){switch(typeof t){case"number":{if(Number.isFinite(t))return Yt(t);break}case"bigint":return Jt(t)}throw new TypeError("Expected a finite number or bigint")}const Qt=t=>t===0||t===0n,Xt=(t,e)=>e===1||e===1n?t:`${t}s`,en=1e-7,tn=24n*60n*60n*1000n;function me(t,e){const o=typeof t=="bigint";if(!o&&!Number.isFinite(t))throw new TypeError("Expected a finite number or bigint");e={...e};const m=t<0?"-":"";t=t<0?-t:t,e.colonNotation&&(e.compact=!1,e.formatSubMilliseconds=!1,e.separateMilliseconds=!1,e.verbose=!1),e.compact&&(e.unitCount=1,e.secondsDecimalDigits=0,e.millisecondsDecimalDigits=0);let r=[];const x=(p,g)=>{const y=Math.floor(p*10**g+en);return(Math.round(y)/10**g).toFixed(g)},_=(p,g,y,w)=>{if(!((r.length===0||!e.colonNotation)&&Qt(p)&&!(e.colonNotation&&y==="m"))){if(w??=String(p),e.colonNotation){const T=w.includes(".")?w.split(".")[0].length:w.length,h=r.length>0?2:1;w="0".repeat(Math.max(0,h-T))+w}else w+=e.verbose?" "+Xt(g,p):y;r.push(w)}},V=Kt(t),b=BigInt(V.days);if(e.hideYearAndDays?_(BigInt(b)*24n+BigInt(V.hours),"hour","h"):(e.hideYear?_(b,"day","d"):(_(b/365n,"year","y"),_(b%365n,"day","d")),_(Number(V.hours),"hour","h")),_(Number(V.minutes),"minute","m"),!e.hideSeconds)if(e.separateMilliseconds||e.formatSubMilliseconds||!e.colonNotation&&t<1e3&&!e.subSecondsAsDecimals){const p=Number(V.seconds),g=Number(V.milliseconds),y=Number(V.microseconds),w=Number(V.nanoseconds);if(_(p,"second","s"),e.formatSubMilliseconds)_(g,"millisecond","ms"),_(y,"microsecond","Âµs"),_(w,"nanosecond","ns");else{const T=g+y/1e3+w/1e6,h=typeof e.millisecondsDecimalDigits=="number"?e.millisecondsDecimalDigits:0,B=T>=1?Math.round(T):Math.ceil(T),F=h?T.toFixed(h):B;_(Number.parseFloat(F),"millisecond","ms",F)}}else{const p=(o?Number(t%tn):t)/1e3%60,g=typeof e.secondsDecimalDigits=="number"?e.secondsDecimalDigits:1,y=x(p,g),w=e.keepDecimalsOnWholeSeconds?y:y.replace(/\.0+$/,"");_(Number.parseFloat(w),"second","s",w)}if(r.length===0)return m+"0"+(e.verbose?" milliseconds":"ms");const i=e.colonNotation?":":" ";return typeof e.unitCount=="number"&&(r=r.slice(0,Math.max(e.unitCount,1))),m+r.join(i)}const nn={class:"latency-indicator"},an=z({__name:"latency-indicator",setup(t){const{t:e}=X(),o=lt(),m=S(()=>{const b=fe.sortBy(o.latency,["timestamp"]);return b[b.length-1]}),r=S(()=>{if(!o.latency||o.latency.length===0)return 0;const b=fe.sortBy(o.latency,["timestamp"]),i=b.slice(Math.max(b.length-5,0));let p=0;for(const{latency:g}of i)p+=g;return Math.round(p/i.length)}),x=S(()=>r.value<=250?4:r.value>250&&r.value<=500?3:r.value>500&&r.value<=750?2:1),_=S(()=>{switch(x.value){case 4:return`${e("connection_excellent")}
(${me(r.value)} ${e("latency")})`;case 3:return`${e("connection_good")}
(${me(r.value)} ${e("latency")})`;case 2:return`${e("connection_fair")}
(${me(r.value)} ${e("latency")})`;case 1:return`${e("connection_poor")}
(${me(r.value)} ${e("latency")})`;default:return null}}),V=S(()=>{switch(x.value){case 4:return"signal_wifi_4_bar";case 3:return"signal_wifi_3_bar";case 2:return"signal_wifi_2_bar";case 1:return"signal_wifi_1_bar";default:return null}});return(b,i)=>{const p=c("v-progress-circular"),g=c("v-icon"),y=pe("tooltip");return K((u(),D("div",nn,[m.value?(u(),$(g,{key:1,name:V.value},null,8,["name"])):(u(),$(p,{key:0,indeterminate:""}))])),[[y,_.value,void 0,{bottom:!0,end:!0}]])}}}),on=R(an,[["__scopeId","data-v-93933dfa"]]),ln={class:"project-info"},sn={class:"name-container"},rn=z({__name:"project-info",setup(t){const e=st(),o=S(()=>e.info?.project?.project_name),m=S(()=>e.info?.project?.project_descriptor);return(r,x)=>{const _=c("v-text-overflow");return u(),D("div",ln,[a(on),C("div",sn,[a(_,{class:"name",text:o.value,placement:"bottom"},null,8,["text"]),m.value?(u(),$(_,{key:0,class:"descriptor",text:m.value,placement:"bottom"},null,8,["text"])):L("",!0)])])}}}),cn=R(rn,[["__scopeId","data-v-b2d8fb55"]]),un=z({__name:"sidebar-detail-group",props:{sidebarOpen:{type:Boolean}},setup(t){const e=t,o=it("sidebar-open-detail",[]),m=k(!1);return Q(()=>e.sidebarOpen,async r=>{r===!1?o.value=[]:(m.value=!0,await Mt(),m.value=!1)}),(r,x)=>{const _=c("v-item-group");return u(),$(_,{modelValue:s(o),"onUpdate:modelValue":x[0]||(x[0]=V=>Pe(o)?o.value=V:null),class:"sidebar-detail-group",scope:"sidebar-detail",mandatory:m.value},{default:l(()=>[J(r.$slots,"default",{},void 0,!0)]),_:3},8,["modelValue","mandatory"])}}}),dn=R(un,[["__scopeId","data-v-abc8855b"]]),vn={class:"inner"},mn={class:"warning"},_n={class:"sub"},fn=z({__name:"license-banner",setup(t){const e=Fe(),o=Le(["license-banner-dismissed"]),{t:m}=X(),r=k([]),x=S(()=>!i.value.project_owner||!i.value.license||i.value.project_usage==="commercial"&&!i.value.org_name),_=k(!1);async function V(){r.value=ut(i.value,p),!(r.value.length>0)&&(_.value=!0,await e.setOwner(i.value),await e.hydrate(),_.value=!1)}async function b(){o.set("license-banner-dismissed","true",{expires:new Date(Date.now()+1e3*60*60*24*30)}),dt({title:m("bsl_banner.remind_next_login"),type:"info"})}const i=k(vt),p=rt(!1,i);return(g,y)=>{const w=c("v-icon"),T=c("v-card-title"),h=c("v-card-text"),B=c("v-button"),F=c("v-card-actions"),I=c("v-card"),O=c("v-dialog");return u(),$(O,null,{default:l(()=>[a(I,null,{default:l(()=>[C("div",vn,[a(T,null,{default:l(()=>[C("span",mn,[W(M(s(m)("bsl_banner.title"))+" ",1),a(w,{name:"warning",filled:""})])]),_:1}),a(h,null,{default:l(()=>[C("div",_n,M(s(m)("bsl_banner.license")),1),a(ct,{modelValue:i.value,"onUpdate:modelValue":y[0]||(y[0]=Z=>i.value=Z),errors:r.value,register:!1,"utm-location":"banner"},null,8,["modelValue","errors"])]),_:1}),a(F,null,{default:l(()=>[a(B,{secondary:"",onClick:b},{default:l(()=>[W(M(s(m)("bsl_banner.remind_later")),1)]),_:1}),a(B,{disabled:x.value,loading:_.value,onClick:V},{default:l(()=>[W(M(s(m)("bsl_banner.set_owner")),1)]),_:1},8,["disabled","loading"])]),_:1})])]),_:1})]),_:1})}}}),pn=R(fn,[["__scopeId","data-v-600d84db"]]),hn=z({__name:"skip-menu",props:{section:{}},setup(t){const{t:e}=X(),o=[{key:"nav",hash:"#navigation",text:e("skip_link_nav")},{key:"moduleNav",hash:"#module-navigation",text:e("skip_link_module_nav")},{key:"main",hash:"#main-content",text:e("skip_link_main")},{key:"sidebar",hash:"#sidebar",text:e("skip_link_sidebar")}],m=S(()=>o.filter(r=>r.key!==t.section));return(r,x)=>{const _=c("v-list-item"),V=c("v-list");return m.value.length?(u(),$(V,{key:0,class:P(["skip-menu",{right:t.section==="sidebar",center:t.section==="main"}])},{default:l(()=>[(u(!0),D(oe,null,le(m.value,b=>(u(),$(_,{key:b,href:r.$router.resolve(b.hash).href,target:"_self"},{default:l(()=>[W(M(b.text),1)]),_:2},1032,["href"]))),128))]),_:1},8,["class"])):L("",!0)}}}),_e=R(hn,[["__scopeId","data-v-a58e5def"]]),bn={class:"module-nav alt-colors"},gn={id:"module-navigation",class:"module-nav-content"},yn={class:"content-wrapper"},wn={class:"flex-container"},kn=z({__name:"private-view",props:{title:{},smallHeader:{type:Boolean},headerShadow:{type:Boolean,default:!0},splitView:{type:Boolean},splitViewMinWidth:{default:0},sidebarShadow:{type:Boolean}},emits:["update:splitView"],setup(t,{emit:e}){const o={moduleBarWidth:60,minModuleNavWidth:220,minContentWidth:590,collapsedSidebarWidth:60,overlaySpace:60},m=t,r=e,{t:x}=X(),_=Oe(),V=S(()=>m.title??null),b=kt(m,"splitView",r),i=Le(["license-banner-dismissed"]),p=k(),g=k(),y=k();let w;const T=()=>{clearTimeout(w),p.value?.classList.remove("hide-overflow-x")};Q(b,()=>{if(!p.value||!g.value)return;p.value.classList.add("hide-overflow-x","hide-overflow-y"),w=setTimeout(T,1500);let v,n;const d=()=>{clearTimeout(v),n?.(),p.value?.classList.remove("hide-overflow-y")};v=setTimeout(d,1500),n=gt(g.value,"transitionend",d)});const{width:h}=mt(),{width:B}=St(y),F=S(()=>{if(!b.value)return!0;let v;return h.value>=1260?v=h.value-o.moduleBarWidth-o.minModuleNavWidth-o.minContentWidth-B.value:h.value>=960?v=h.value-o.moduleBarWidth-o.minModuleNavWidth-o.minContentWidth-o.collapsedSidebarWidth:v=h.value-o.minContentWidth,v>=m.splitViewMinWidth}),{data:I}=_t("module-width",{}),O=k(ae(I.value?.nav,o.minModuleNavWidth));Q(O,fe.debounce(v=>{I.value={...I.value??{},nav:v}},300));const Z=k(ae(I.value?.main,o.minContentWidth));Q(Z,fe.debounce(v=>{I.value={...I.value??{},main:v}},300));const ee=k(!1),j=S(()=>{const v=b.value?m.splitViewMinWidth:0,n=F.value?o.minContentWidth+v:o.minContentWidth;let d;return h.value>=1260?d=h.value-o.moduleBarWidth-n-B.value:h.value>=960?d=h.value-o.moduleBarWidth-n-o.collapsedSidebarWidth:d=h.value-o.moduleBarWidth+o.overlaySpace,Math.max(d,o.minModuleNavWidth)}),te=S(()=>{const v=b.value?m.splitViewMinWidth:0;let n;return h.value>=1260?n=h.value-o.moduleBarWidth-O.value-v-B.value:h.value>=960?n=h.value-o.moduleBarWidth-O.value-v-o.collapsedSidebarWidth:n=h.value-v,Math.max(n,o.minContentWidth)}),ne=S(()=>({snapZones:[{width:40,snapPos:o.minModuleNavWidth,direction:"left"},{width:40,snapPos:j.value,direction:"right"}]})),se=k(!1),he=S(()=>({snapZones:[{width:40,snapPos:o.minContentWidth,direction:"left"},{width:40,snapPos:te.value,direction:"right"}],alwaysShowHandle:!0,disableTransition:ee.value})),q=k(!1),E=Ee(),ie=ke(),be=S(()=>E.currentUser?E.currentUser?.app_access||!1:!0),Y=k(!1),{sidebarOpen:U,fullScreen:re}=Se(ie),ge=S(()=>E.currentUser&&"appearance"in E.currentUser?E.currentUser.appearance:"auto");Bt("main-element",p),_.afterEach((v,n)=>{!v.meta.isFloatingView&&!n.meta.isFloatingView&&p.value?.scrollTo({top:0}),re.value=!1}),xt({title:V});function ce(v){v.target&&v.target.classList.contains("close")===!1&&(U.value=!0)}function ae(v,n){return v&&!Number.isNaN(v)?Number(v):n}const ue=Fe(),de=S(()=>E.isAdmin&&!ue.settings?.project_owner&&!i.get("license-banner-dismissed"));return(v,n)=>{const d=c("v-button"),A=c("v-info"),H=c("v-overlay");return be.value===!1?(u(),$(A,{key:0,center:"",title:s(x)("no_app_access"),type:"danger",icon:"block"},{append:l(()=>[a(d,{to:"/logout"},{default:l(()=>[W(M(s(x)("switch_user")),1)]),_:1})]),default:l(()=>[W(M(s(x)("no_app_access_copy"))+" ",1)]),_:1},8,["title"])):(u(),D("div",{key:1,class:P(["private-view",{appearance:ge.value,"full-screen":s(re),splitView:t.splitView}])},[a(_e,{section:"nav"}),C("aside",{id:"navigation",role:"navigation","aria-label":"Module Navigation",class:P({"is-open":q.value,"has-shadow":t.sidebarShadow})},[a(ft),a(Ie,{width:O.value,"onUpdate:width":n[0]||(n[0]=N=>O.value=N),"min-width":o.minModuleNavWidth,"max-width":j.value,options:ne.value,onDragging:n[1]||(n[1]=N=>ee.value=N),onTransitionEnd:T},{default:l(()=>[C("div",bn,[a(_e,{section:"moduleNav"}),a(cn),C("div",gn,[J(v.$slots,"navigation",{},void 0,!0)])])]),_:3},8,["width","min-width","max-width","options"])],2),a(_e,{section:"main"}),C("div",{id:"main-content",ref_key:"contentEl",ref:p,class:"content"},[a(pt,{ref_key:"headerBarEl",ref:g,small:t.smallHeader||t.splitView,shadow:t.headerShadow||t.splitView,"show-sidebar-toggle":"",title:t.title,"onToggle:sidebar":n[2]||(n[2]=N=>U.value=!s(U)),onPrimary:n[3]||(n[3]=N=>q.value=!q.value)},Ct({_:2},[le(v.$slots,(N,ve)=>({name:ve,fn:l(ye=>[J(v.$slots,ve,Wt(Dt(ye)),void 0,!0)])}))]),1032,["small","shadow","title"]),C("div",yn,[a(Ie,{width:Z.value,"onUpdate:width":n[4]||(n[4]=N=>Z.value=N),"min-width":o.minContentWidth,"max-width":te.value,disabled:!s(b),options:he.value,onDragging:n[5]||(n[5]=N=>se.value=N)},{default:l(()=>[K(C("main",null,[J(v.$slots,"default",{},void 0,!0)],512),[[Ke,F.value]])]),_:3},8,["width","min-width","max-width","disabled","options"]),t.splitView?(u(),D("div",{key:0,id:"split-content",class:P({"is-dragging":se.value})},[J(v.$slots,"splitView",{},void 0,!0)],2)):L("",!0)])],512),a(_e,{section:"sidebar"}),C("aside",{id:"sidebar",ref_key:"sidebarEl",ref:y,role:"contentinfo",class:P(["alt-colors",{"is-open":s(U),"has-shadow":t.sidebarShadow}]),"aria-label":"Module Sidebar",onClick:ce},[C("div",wn,[a(dn,{"sidebar-open":s(U)},{default:l(()=>[J(v.$slots,"sidebar",{},void 0,!0)]),_:3},8,["sidebar-open"]),n[10]||(n[10]=C("div",{class:"spacer"},null,-1)),a(qt,{modelValue:Y.value,"onUpdate:modelValue":n[6]||(n[6]=N=>Y.value=N),"sidebar-open":s(U)},null,8,["modelValue","sidebar-open"])])],2),a(H,{class:"nav-overlay",active:q.value,onClick:n[7]||(n[7]=N=>q.value=!1)},null,8,["active"]),a(H,{class:"sidebar-overlay",active:s(U),onClick:n[8]||(n[8]=N=>U.value=!1)},null,8,["active"]),a(Ot),Y.value===!1?(u(),$(ht,{key:0,"sidebar-open":s(U)},null,8,["sidebar-open"])):L("",!0),a(bt),a(pn,{modelValue:de.value,"onUpdate:modelValue":n[9]||(n[9]=N=>de.value=N)},null,8,["modelValue"])],2))}}}),Wn=R(kn,[["__scopeId","data-v-c0181c0b"]]);export{Wn as PrivateView,Wn as default};
